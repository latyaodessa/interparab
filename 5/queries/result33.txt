Find all customer older then 30 who had appintments

rules applied:
At least 5 queries have to return nodes while considering information from descendants that are not children of these nodes to do so. 
At least 5 queries have to consider information that is stored in attributes. 
At least 5 queries have to deal with text and text related functions. 
